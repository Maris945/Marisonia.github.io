<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jobby</title>

<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
}
nav {
  background: #333;
  color: white;
  padding: 10px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.logo {
  font-size: 22px;
  font-weight: bold;
}
nav a, nav button {
  color: white;
  margin-left: 15px;
  background: none;
  border: none;
  cursor: pointer;
  font-weight: bold;
}
.form-container {
  max-width: 400px;
  margin: 30px auto;
  padding: 20px;
  border: 2px solid #ccc;
  border-radius: 10px;
  text-align: center;
}
input {
  width: 90%;
  padding: 10px;
  margin: 8px 0;
}
.section {
  padding: 60px 0;
}
.hero {
  background: url('images/home1.jpg') no-repeat center center;
  background-size: cover;
  height: 60vh;
  color: white;
  display: flex;
  flex-direction: column;
  justify-content: center;
  text-align: center;
}
.hero h1 {
  font-size: 3rem;
  font-weight: bold;
}
.hero p {
  font-size: 1.5rem;
}
.footer {
  background: #333;
  color: white;
  padding: 20px 0;
  text-align: center;
}
.error { color: red; }
.success { color: green; }
</style>
</head>

<body>

<!-- NAVBAR -->
<nav>
  <div class="logo">Jobby</div>
  <div id="navLinks" style="display:none;">
    <a href="#home">Home</a>
    <a href="#obiettivi">Obiettivi</a>
    <a href="#descrizione">Descrizione</a>
    <a href="#contatti">Contatti</a>
    <button id="logoutBtn">Logout</button>
  </div>
</nav>

<!-- LOGIN + REGISTRAZIONE -->
<div id="authContainer">

  <!-- REGISTRAZIONE -->
  <div class="form-container">
    <h2>Registrazione</h2>
    <form id="registerForm" autocomplete="on">
      <input type="text" id="firstName" placeholder="Nome" required>
      <input type="text" id="lastName" placeholder="Cognome" required>
      <input type="email" id="registerEmail" placeholder="Email" required autocomplete="username">
      <input type="password" id="registerPassword" placeholder="Password" required autocomplete="new-password">
      <input type="submit" value="Registrati">
    </form>
    <p id="registerError" class="error"></p>
    <p id="registerSuccess" class="success"></p>
  </div>

  <!-- LOGIN -->
  <div class="form-container">
    <h2>Login</h2>
    <form id="loginForm" autocomplete="on">
      <input type="email" id="loginEmail" placeholder="Email" required autocomplete="username">
      <input type="password" id="loginPassword" placeholder="Password" required autocomplete="current-password">
      <label>
        <input type="checkbox" id="showLoginPassword"> Mostra password
      </label><br><br>
      <label>
        <input type="checkbox" id="stayLoggedIn"> Rimani connesso
      </label><br><br>
      <input type="submit" value="Accedi">
    </form>
    <p id="loginError" class="error"></p>
    <p><a href="#" id="resetPasswordLink">Hai dimenticato la password?</a></p>
    <p id="resetMsg" class="success"></p>
    <p id="resetError" class="error"></p>
  </div>

</div>

<!-- HOME + SEZIONI (visibili solo dopo login) -->
<div id="homeContent" style="display:none;">
  <!-- Hero -->
  <section class="hero" id="home">
    <div class="container text-center text-white">
      <h1>Benvenuto su Jobby</h1>
      <p>Il sito che ti aiuta a trovare lavoro facilmente</p>
      <a href="#obiettivi" class="btn btn-primary btn-lg mt-3">Scopri di più</a>
    </div>
  </section>

  <!-- Obiettivi -->
  <section class="section bg-light" id="obiettivi">
    <div class="container text-center">
      <h2>I nostri obiettivi</h2>
      <div class="row">
        <div class="col-md-4">
          <h4>Opportunità</h4>
          <p>Ti aiutiamo a trovare le migliori offerte di lavoro.</p>
        </div>
        <div class="col-md-4">
          <h4>Carriera</h4>
          <p>Supportiamo la tua crescita professionale con consigli e corsi.</p>
        </div>
        <div class="col-md-4">
          <h4>Networking</h4>
          <p>Connetti con aziende e professionisti del settore.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Descrizione -->
  <section class="section" id="descrizione">
    <div class="container text-center">
      <h2>Chi siamo</h2>
      <p>Jobby è un sito dedicato a chi cerca lavoro o vuole migliorare la propria carriera. Offriamo strumenti, consigli e opportunità per trovare il lavoro giusto per te, in modo semplice e veloce.</p>
    </div>
  </section>

  <!-- Contatti -->
  <section class="section bg-light" id="contatti">
    <div class="container">
      <h2 class="text-center">Contatti</h2>
      <div class="row justify-content-center">
        <div class="col-md-6">
          <form>
            <div class="mb-3">
              <label for="nome" class="form-label">Nome</label>
              <input type="text" class="form-control" id="nome" required>
            </div>
            <div class="mb-3">
              <label for="email" class="form-label">Email</label>
              <input type="email" class="form-control" id="email" required>
            </div>
            <div class="mb-3">
              <label for="messaggio" class="form-label">Messaggio</label>
              <textarea class="form-control" id="messaggio" rows="4" required></textarea>
            </div>
            <button type="submit" class="btn btn-primary w-100">Invia</button>
          </form>
        </div>
      </div>
    </div>
  </section>
</div>

<!-- Footer -->
<footer class="footer">
  <p>&copy; 2026 Jobby. Tutti i diritti riservati.</p>
</footer>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyBGgjzIMmW1YxBXTeatlf9gMHzADvER_8A",
  authDomain: "jobby-f704a.firebaseapp.com",
  projectId: "jobby-f704a",
  storageBucket: "jobby-f704a.firebasestorage.app",
  messagingSenderId: "320047348",
  appId: "1:320047348:web:f4fab4bb3fa8b865b9f6a1"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.database();

// Elementi
const authContainer = document.getElementById("authContainer");
const navLinks = document.getElementById("navLinks");
const homeContent = document.getElementById("homeContent");

// Pulizia campi
const loginEmail = document.getElementById("loginEmail");
const loginPassword = document.getElementById("loginPassword");
const registerEmail = document.getElementById("registerEmail");
const registerPassword = document.getElementById("registerPassword");
const firstName = document.getElementById("firstName");
const lastName = document.getElementById("lastName");
const showLoginPassword = document.getElementById("showLoginPassword");
const stayLoggedIn = document.getElementById("stayLoggedIn");
const loginError = document.getElementById("loginError");
const registerError = document.getElementById("registerError");
const registerSuccess = document.getElementById("registerSuccess");
const resetPasswordLink = document.getElementById("resetPasswordLink");
const resetMsg = document.getElementById("resetMsg");
const resetError = document.getElementById("resetError");
const logoutBtn = document.getElementById("logoutBtn");

// Nascondo tutto all'inizio
function hideAllSections() { homeContent.style.display = "none"; navLinks.style.display = "none"; }
hideAllSections();

// Stato utente
auth.onAuthStateChanged(user => {
  if(user){
    authContainer.style.display = "none";
    homeContent.style.display = "block";
    navLinks.style.display = "flex";
    loginError.innerText = ""; registerError.innerText = ""; registerSuccess.innerText = "";
    resetMsg.innerText = ""; resetError.innerText = "";
  }else{
    authContainer.style.display = "block";
    hideAllSections();
    loginEmail.value = ""; loginPassword.value = ""; registerEmail.value = ""; registerPassword.value = "";
    firstName.value = ""; lastName.value = "";
    showLoginPassword.checked = false; stayLoggedIn.checked = false;
    loginError.innerText = ""; registerError.innerText = ""; registerSuccess.innerText = "";
    resetMsg.innerText = ""; resetError.innerText = "";
  }
});

// Registrazione
document.getElementById("registerForm").addEventListener("submit", e=>{
  e.preventDefault();
  auth.createUserWithEmailAndPassword(registerEmail.value, registerPassword.value)
    .then(res=>{
      db.ref("users/"+res.user.uid).set({firstName:firstName.value,lastName:lastName.value,email:registerEmail.value});
      registerSuccess.innerText="Registrazione completata! Ora puoi fare login."; registerError.innerText="";
    }).catch(err=>{registerError.innerText=err.message; registerSuccess.innerText="";});
});

// Login
document.getElementById("loginForm").addEventListener("submit", e=>{
  e.preventDefault();
  auth.signInWithEmailAndPassword(loginEmail.value,loginPassword.value)
    .catch(err=>loginError.innerText=err.message);
});

// Logout
logoutBtn.addEventListener("click", ()=>{
  auth.signOut();
});

// Mostra password
showLoginPassword.addEventListener("change",()=>{loginPassword.type=showLoginPassword.checked?"text":"password";});

// Reset password
resetPasswordLink.addEventListener("click", e=>{
  e.preventDefault();
  const email = loginEmail.value;
  if(!email){resetError.innerText="Inserisci prima la tua email"; resetMsg.innerText=""; return;}
  auth.sendPasswordResetEmail(email).then(()=>{resetMsg.innerText="Email di reset inviata!"; resetError.innerText="";})
    .catch(err=>{resetError.innerText=err.message; resetMsg.innerText="";});
});
</script>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>